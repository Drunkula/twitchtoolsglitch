<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <title>Youtube Player</title>
    <style>
        li {
            cursor: pointer;
        }
        li:hover {
            background-color: bisque;
        }
    </style>
    <script>
        function out() {
            var nDiv = document.createElement("div");
            nDiv.innerText = [...arguments].join("");
            document.getElementById("messages").append(nDiv);
        }
            // real version doesn't need logging
        function clog() {
            console.log(...arguments);
        }

        qs = new window.URLSearchParams( window.location.search );
        QPx = qs.get("x"); QPy = qs.get("y"); QPmuted = qs.get("muted"); QPVideo = qs.get("video");

        ytplayerXSize = QPx ??= 320;
        ytplayerYSize = QPy ??= 180;
        ytplayerMuted = QPmuted ??= 1;
        ytplayerVolume = 20;
        ytplayerVideoId = QPVideo ??= "LECSVlc6O1g";
        ytplayerWebSock = qs.get("s");  // socket can be specified with &s=ws:youraddress.thing


    </script>

    <script src="./entrypoint.mod.js" type="module"></script>
    <!-- if you don't defer it doesn't work even if the controller is run first
        You pretty much have to have the callback it triggers in place
        <script src="https://www.youtube.com/iframe_api" defer></script>
    -->
</head>
<body>
    <div class="section">

    <!-- I'm going to have to put in a fucking table -->
    <table class="table">
        <tr>
            <td><div id="ytplayer"><h2>YOUTUBE PLAYER</h2></div></td>
            <td>
                <div class="controls">
                    <ul>
                        <li data-action="play">Play</li>
                        <li data-action="pause">Pause</li>
                        <li data-action="stop">Stop</li>
                        <li data-action="restart">Restart</li>
                        <li data-action='{"action":"fwd", "data":30}'>fwd</li>
                        <li data-action='{"action":"rwd", "data":5}'>rwd</li>
                        <li data-action="almostend">toward end</li>
                        <li data-action="adddefaults">adddefaults</li>
                    </ul>
                </div>
            </td>
            <td>
                <div class="controls">
                    <ul>
                        <li data-action='{"action":"sendmessage", "data": "testaddnext"}''>add video next</li>
                        <li data-action='{"action":"sendmessage", "data": "testaddrandom"}''>add video random pos</li>
                        <li data-action="shuffle">Shuffle (not all)</li>
                        <li data-action="shuffleall">Shuffle all</li>
                        <li data-action="big">Big</li>
                        <li data-action="small">Small</li>
                        <li data-action="title">Title</li>
                        <li data-action="qualityget">Qualities</li>
                        <li data-action="clearvideos">Clear Videos</li>
                        <li data-action="getvideoinfo">Video Info</li>
                    </ul>
                </div>
            </td>

            <td>
                <div class="controls">
                    <ul>
                        <li data-action="next">next()</li>
                        <li data-action="prev">prev()</li>
                        <li data-action="shuffle">Shuffle (not all)</li>
                        <li data-action="shuffleall">Shuffle all</li>
                        <li data-action="big">Big</li>
                        <li data-action="small">Small</li>
                        <li data-action="connect">Connect Socket</li>
                        <li data-action="disconnect">Disconnect Socket</li>
                        <li data-action='{"action":"sendmessage", "data": "loadplaylist"}'>load_playlist()</li>
                        <li data-action='{"action":"sendmessage", "data": "saveplaylist"}'>save_playlist()</li>
                    </ul>
                </div>
            </td>

            <td>
                <div class="controls">
                    <ul>
                        <li data-action="volup">volume up</li>
                        <li data-action="voldown">volume down</li>
                        <li data-action="mutetoggle">Mute/Unmute</li>
                    </ul>
                </div>
            </td>

        </tr>
    </table>

    <div id="messages" class="block"></div>

    </div>

</body>
</html>
<!--
Things to hide

ytp-chrome-top ytp-show-cards-title
ytp-title
    ytp-watermark


    ytp-channel-title-logo

-->